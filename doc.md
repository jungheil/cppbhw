# C++大作业——黎容熙
## T1
### 设计内容
程序运行时，自动读入与程序同目录下，存有汇率的的`rate.csv`文件，若目录下没有该文件，程序会报错。当需要新增、修改、删除货币时，只需要修改csv文件即可，无须更改程序。

程序实现了RMB兑换外币和外币兑换RMB的功能。

### 设计思路
+ 先实现一个货币类`Currency`，使用初始化列表对货币名称和汇率进行初始化。这个类两个主要的成员函数是外币兑换RMB和RMB兑换外币。
+ 再实现一个银行类`Bank`，构造时读入csv档，并将文件中的所有货币分别新建一个货币类的对象，存入vector中。并且通过重载实现了根据货币名或者索引返回相应货币对象的指针。
+ 最后实现一个`UI`类，进行与用户的交互。

### 总结分析
+ 一开始我使用了子类来实现不同货币的不同汇率和名字，但是鉴于没有用到不同的方法，所以并没有太多意义，同时增删改货币类型的时候还需要对代码进行更改和重新编译，故最后并没有使用子类。
+ 同时将、Bank、类和`Currency`类设计成聚合关系，也更加符合逻辑，对货币增删改不需要更改代码。
+ 同时单独设计`UI`类进行交互，也降低了代码的耦合。

## T2
### 设计内容
程序让用户分别输入分数1、运算符、分数2，并计算结果，将结果作为第二次计算的分数1。

可通过`clear`指令对当前待计算公式进行清除，并重新从分数1开始输入。输入`exit`退出程序。

程序保存了10条历史计算记录，保存数量可以通过修改交互类中的成员变量`MAX_HISTORY`。

程序能自动转换字符串为分数类，可输入格式形如`2/3`的分数或者形如`6`的整数。同时分数类还能表示nan。

### 设计思路
+ 分数类`Fraction`通过重载可通过使用字符串或者输入分子和分母进行构造。同时构造的时候能够自动对分数进行化简。
+ 通过递归实现计算最大公约数，并且使用成员函数`Simplify`实现化简功能。
+ 通过友元函数重载运算符`<<`、`>>`、`+`、`-`、`*`、`/`。
+ 使用类`Interaction`实现人机交互。该类聚合了`Formula`类，这个类进行单条公式的存储，显示和计算。通过了模版类的方法，这个类可以实现对本题的分数类进行计算，也可以对下一题的大数类进行计算。使用模版提高了代码复用性，故本题用于实现交互的源代码`Interaction.h`和`Interaction.cpp`和下一题进行大数计算的源代码是一样的。

### 总结分析
+ 使用模版类进行代码的复用。

## T3
### 设计内容
可以实现对用户给得大数进行加减乘除运算，同时输入的大数可以是整数或者是小数，也可以是负数。

可以将用户输入的字符串格式自动转换成`LargeNum`类的格式，输入格式可以形如`10.`、`-0000.1000`、`-.01`等，当格式不正确会构造出一个nan的大数对象。

通过运算符重载可以实现加减乘除和大于、小于的比较。

显示时当数字小于一会自动使用科学计数法表示。

交互界面功能同上一题。

### 设计思路
+ 由于交互界面使用模版类，所以代码与上一题一致，故不做说明了。
+ 使用状态转移表对用户输入的数据进行合法判断和格式化。
+ 设计大数计算虚基类`Compute`，里面有成员函数实现功能：前补0、后补0、一位数的加减乘除。通过子类分别实现Solve方法，使用多态的特性为下一步提供便利。
+ 使用单例模式，设计单例工厂`ComFactory`，使得程序只需要分别构造出一个加减乘除类。在频繁的运算当中，不需要频繁的构造对象，节约了内存和时间。
+ 通过友元函数重载运算符`<<`、`>>`、`+`、`-`、`*`、`/`、`<`、`>`。
+ （对加减乘除具体说明）

### 总结分析
+ 使用单例模式，让加减乘除类为唯一实例，节省内存和时间。
+ 使用多态的特性，单例工厂输入运算符号，返回不同的子类对象，但返回类型都为基类`Compute`的指针。
+ 使用状态转移表能比较简单的实现对用户输入合法性进行判断。